{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="icon" type="image/x-icon" href="/IMAGES/fevicon.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Raleway&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@400&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@700&family=Noto+Sans:wght@500&display=swap"
        rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,200;0,300;0,400;0,500;0,700;0,800;1,800&display=swap"
        rel="stylesheet">



    <title>Dashboard | Rentmate</title>
</head>

<style>
    *::-webkit-scrollbar {
        display: none;

    }

    input:focus {
        outline: none;
        transition: 0.6s;
    }

    textarea:focus {
        outline: none;
        transition: 0.6s;
    }
</style>

<body class=" bg-gradient-to-r from-[#5d1961]  to-gray-900 text-white" style="font-family: 'Poppins', sans-serif;">
    <div class="flex flex-wrap mr-2 h-screen w-full">
        <div
            class="bg-gradient-to-b from-[#5d1961]  to-gray-900 shadow-2xl border-r border-fuchsia-900 w-1/6 h-screen  pt-10 fixed">
            <div class="">
                <img src="{% static 'IMG/white 1.png' %}" alt="" class="sidebar w-40 pl-2 mr-36 ml-8 fill-white">
            </div>


            <div class="flex justify-between h-full w-full pr-16 mt-20 scale-90 shadow-sm" id="Sidebar">

                <ul class="mt-5 ml-5">
                    <li class="flex mb-7 ">
                        <a href="{% url 'b_dash' number=num %}"
                            class="flex scale-90 mb-5 opacity-70 hover:opacity-100 transition-all">

                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                                stroke="currentColor" class="w-6 h-6">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0115 18.257V17.25m6-12V15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 15V5.25m18 0A2.25 2.25 0 0018.75 3H5.25A2.25 2.25 0 003 5.25m18 0V12a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 12V5.25" />
                            </svg>
                            <h1 class="ml-3">Dashboard</h1>
                        </a>

                    </li>
                    <li class="flex pb-7">
                        <a href="{% url 'bcomp' number=num %}"
                            class="flex scale-90 pb-5 opacity-70 hover:opacity:100  transition-all">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                                stroke="currentColor" class="w-6 h-6">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" />
                            </svg>
                            <h1 class="ml-3 "> Complaints</h1>
                        </a>

                    </li>
                    <li class="flex pb-7">
                        
                        <a href="" class="flex scale-90 pb-5 opacity-70 hover:opacity:100  transition-all">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                                stroke="currentColor" class="w-6 h-6">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M12 6v12m-3-2.818l.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                            <h1 class="ml-3 font-extrabold text-lg">Payments & Bills</h1>
                        </a>
                    </li>
                    <li class="flex">
                        <a href="" class="flex"></a>

                    </li>

                    <li class="flex pb-7">
                        <a href="{% url 'renters' number=num%}" class="flex scale-90 pb-5 opacity-70 hover:opacity:100  transition-all ">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                                stroke="currentColor" class="w-6 h-6">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 010 3.75H5.625a1.875 1.875 0 010-3.75z" />
                            </svg>

                            <h1 class="ml-3">See All Renters</h1>
                        </a>

                    </li>
                    <li class="flex pb-7">
                        <a href="{% url 'houseup' number=num%}" class="flex scale-90 pb-5 opacity-70 hover:opacity-100 transition-all">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                                stroke="currentColor" class="w-6 h-6">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" />
                            </svg>
                            <h1 class="ml-3">House Upgrade</h1>
                        </a>
                    </li>
                    <li class="flex pb-7">
                        <a href="{% url 'bsettings' number=num %}" class="flex scale-90 pb-5 opacity-70 hover:opacity-100 transition-all">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                                stroke="currentColor" class="w-6 h-6">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M4.5 12a7.5 7.5 0 0015 0m-15 0a7.5 7.5 0 1115 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077l1.41-.513m14.095-5.13l1.41-.513M5.106 17.785l1.15-.964m11.49-9.642l1.149-.964M7.501 19.795l.75-1.3m7.5-12.99l.75-1.3m-6.063 16.658l.26-1.477m2.605-14.772l.26-1.477m0 17.726l-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205L12 12m6.894 5.785l-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864l-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495" />
                            </svg>

                            <h1 class="ml-3">Settings & Privacy</h1>
                        </a>
                    </li>


                    <li class="flex pb-7 pl-1 mt-16">
                        <a href="{% url 'loout'%}" class="flex scale-90 pb-5 opacity-70 hover:opacity-100 transition-all">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                                stroke="currentColor" class="w-6 h-6">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75" />
                            </svg>
                            <h1 class="ml-3">Sign out</h1>
                        </a>
                    </li>



                </ul>
            </div>

        </div>
        <div class="w-5/6 ml-80" id="NavAndOthers" style="margin-left: 33vh; margin-right: 2vh;">
            <nav class=" ml-10 rounded-xl mt-10 bg-gradient-to-r from-fuchsia-900 via-oran-900 to-gray-900 border border-fuchsia-900  flex justify-between shadow-2xl"
                id="navBar">





                <div class="p-3 ">
                    <h1 class="text-xs font-thin mb-2">Welcome,</h1>
                    <h1 class="text-base ">{{owner.fname|add:" "|add:owner.lname}}</h1>
                    <h1 class="text-sm font-extralight">House Owner</h1>
                </div>
                <div class="flex  mr-9 mt-5">
                    <div class="ml-5 mt-2">
                        <button>
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 opacity-80" viewBox="0 0 20 20"
                                fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z"
                                    clip-rule="evenodd" />
                            </svg>
                        </button>
                    </div>

                    <div class="ml-5 mt-2">
                        <button>
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 opacity-80" viewBox="0 0 20 20"
                                fill="currentColor">
                                <path
                                    d="M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z" />
                            </svg>
                        </button>
                    </div>

                    <div class="ml-5">
                        <img src="{{owner.picc.url}} " class=" w-10 h-10  rounded-full border" alt="">
                    </div>
                </div>
            </nav>


            <div class="flex flex-warp w-full " id="Main">
                <div
                    class=" bg-gradient-to-r from-fuchsia-900 via-oran-900 to-gray-900 border border-fuchsia-900 ml-10 mt-10 w-1/2 h-full  rounded-2xl">


                    <div
                        class="bg-gradient-to-r from-[#731f78]  to-gray-800 shadow-2xl border w-full border-fuchsia-900  rounded-2xl">
                        <h1 class="relative top-4 text-sm left-9">Overview</h1>
                        <div class=" border border-fuchsia-900 p-3 rounded-2xl flex h-fit mt-5 ml-5 mr-5">
                            <div class="border-r pr-5 border-fuchsia-500">
                                <h1 class="text-xs">Total Revenue</h1>
                                <h1 class="text-xl">{{total_rev.sum}} BDT</h1>
                            </div>

                            <div class="ml-5 border-r pr-5 border-fuchsia-500">
                                <h1 class="text-xs">This Month Revenue</h1>
                                <h1 class="text-xl">{{month_rev.sum}} BDT</h1>
                            </div>

                            <div class="ml-5 border-r pr-5 border-fuchsia-500">
                                <h1 class="text-xs">Payment Due</h1>
                                <h1 class="text-xl">{{ due_pay.count}}</h1>
                            </div>
                            <div class="ml-5 border-r pr-5 border-fuchsia-500">
                                <h1 class="text-xs">Due Appartment</h1>
                                <h1 class="text-xl">
                                    {% for due in due_pay %}
                                        {{due.apps.id}} 
                                    {% endfor %}
                                </h1>
                            </div>

                            <div class="ml-5">
                                <h1 class="text-xs">Due Month</h1>
                                <h1 class="text-xl">{{month}}</h1>
                            </div>


                        </div>
                        <h1 class="relative top-9 text-sm left-11">Filter Payment List</h1>
                        <div class="grid w-full p-5 ">


                            <div class="flex flex-row w-full">
                                <div class="flex flex-col rounded-xl border border-fuchsia-900 m-5 p-3 shadow-xl w-1/3 ">
                                    <label for="" class="text-xs mb-1 ml-1">Payment Status</label>
                                    <select name="" id="status" class="bg-transparent w-full">
                                        <option value="" class="bg-gray-800 text-sm ">Select </option>
                                        <option value="PAID" class="bg-gray-800 text-sm ">Paid </option>
                                        <option value="NOT PAID" class="bg-gray-800 text-sm ">Not Paid</option>

                                    </select>

                                </div>


                                <div
                                    class="flex flex-col rounded-xl border border-fuchsia-900 m-5 p-3 shadow-xl w-1/3 ml-7">
                                    <label for="" class="text-xs mb-1 ml-1">Sort by Appartment</label>
                                    <select name="" id="app" class="bg-transparent w-full">
                                        <option value="" class="bg-gray-800 text-sm ">Select</option>
                                        {% for app in apps %}
                                            <option value="{{app.id}}" class="bg-gray-800 text-sm ">{{app.id}}</option>
                                        {% endfor %}
                                    </select>

                                </div>
                                
                                <div
                                    class="flex flex-col rounded-xl border border-fuchsia-900 m-5 p-3 shadow-xl w-1/3 ml-7">
                                    <label for="" class="text-xs mb-1 ml-1">Sort by Month</label>
                                    <select name="" id="month" class="bg-transparent w-full">
                                        <option value="" class="bg-gray-800 text-sm ">Select</option>
                                        <option value="January" class="bg-gray-800 text-sm ">January</option>
                                        <option value="February" class="bg-gray-800 text-sm ">February</option>
                                        <option value="March" class="bg-gray-800 text-sm ">March</option>
                                        <option value="April" class="bg-gray-800 text-sm ">April</option>
                                        <option value="May" class="bg-gray-800 text-sm ">May</option>
                                        <option value="June" class="bg-gray-800 text-sm ">June</option>
                                        <option value="July" class="bg-gray-800 text-sm ">July</option>
                                        <option value="August" class="bg-gray-800 text-sm ">August</option>
                                        <option value="September" class="bg-gray-800 text-sm ">September</option>
                                        <option value="October" class="bg-gray-800 text-sm ">October</option>
                                        <option value="November" class="bg-gray-800 text-sm ">November</option>
                                        <option value="December" class="bg-gray-800 text-sm ">December</option>
                                        
                                    </select>

                                </div>
                            </div>











                        </div>
                    </div>
                </div>


                <div
                    class="bg-gradient-to-r from-fuchsia-900 via-oran-900 to-gray-900 border border-fuchsia-900 ml-10 mt-10 w-1/2 h-full rounded-2xl">

                    <div class="p-4">
                        <div class="">
                            <h1 class=" text-base">Generate a Token!</h1>
                            <h1 class="mt-1  text-xs">If your reneter pays you offline, give them an offline payment
                                token</h1>
                        </div>
                        <button title="Generate"
                            class="relative  border top-2  p-5 w-full border-fuchsia-900 scale-90 hover:text-lg transition-all hover:bg-fuchsia-800  shadow-2xl hover:rounded-2xl hover:font-bold">Generate
                            Token</button>
                    </div>

                    <div class="p-4">
                        <h1 class="text-base">Update Offline Payment Status</h1>
                        <h1 class="mt-1  text-xs">Update offline payment status here</h1>

                        <button title="Generate"
                            class="relative  border top-2  p-5 w-full border-fuchsia-900 scale-90 hover:text-lg transition-all hover:bg-fuchsia-800  shadow-2xl hover:rounded-2xl hover:font-bold">Update
                            offline Status</button>
                    </div>




                </div>




            </div>



            <!-- Tables -->
            <div
                class="p-5 ml-10 mt-10 bg-gradient-to-r from-[#5d1961]  to-gray-900 border border-fuchsia-900 rounded-xl">
                <h1 class="text-white  pl-2 pt-4 tracking-wider text-sm w-fit">All Payment List</h1>
                <div class="mx-2" id="contain">
                    <div class="w-full h-fit flex flex-row bg-gray-800 border border-fuchsia-900 p-3 rounded-lg mt-3">
                        <div class="ml-3 w-1/6 flex" style="align-items: center;">
                            <h1>Month</h1>
                        </div>
                        <div class="ml-3 w-1/6 flex" style="align-items: center;">
                            <h1>Apartment</h1>
                        </div>
                        <div class="ml-3 w-1/6 flex" style="align-items: center;">
                            <h1>Status</h1>
                        </div>
                        <div class="ml-3 w-1/6 flex" style="align-items: center;">
                            <h1>Payment date</h1>
                        </div>
                        <div class="ml-3 w-1/6 flex" style="align-items: center;">
                            <h1>Payment method</h1>
                        </div>
                    </div>
                    {% for p in pay%}
                    <div class="w-full h-fit flex flex-row bg-gradient-to-r from-fuchsia-900 to-gray-900 border border-fuchsia-900 p-3 rounded-lg mt-3">
                        <div class="ml-3 w-1/6 flex  " style="align-items: center;">
                            <h1>{{p.month}}</h1>
                        </div>
                        <div class="ml-3 w-1/6 flex  " style="align-items: center;">
                            <h1>{{p.apps.id}}</h1>
                        </div>
                        <div class="ml-3 w-1/6 flex " style="align-items: center;">
                            <h1>{{p.status}}</h1>
                        </div>
                        <div class="ml-3 w-1/6 flex " style="align-items: center;">
                            {% if p.status == "PAID" %}
                            <h1>{{p.date}}</h1>
                            {% else %}
                            <h1>The payment is due</h1>
                            {% endif %}
                        </div>
                        <div class="ml-3 w-1/6 flex " style="align-items: center;">
                            {% if p.status == "PAID" and p.paymentID != none %}
                                <h1>Online payment({{p.paymentID}})</h1>
                            {% elif p.status == "PAID" and p.paymentID == none  %}
                                <h1>Offline payment</h1>
                            {% endif %}
                        </div>
                        
                    </div>
                    {%endfor%}
                </div>
            </div>
            <!-- Tables end -->



        </div>



    </div>



    </div>

    <script src="https://code.jquery.com/jquery-3.6.4.js" integrity="sha256-a9jBBRygX1Bh5lt8GZjXDzyOB+bWve9EiO7tROUtj/E=" crossorigin="anonymous"></script>
    <script>
        $('#status').change(function() {
            const val = $(this).val() ;

            $.ajax({
                url: "{% url 'bpay_s' number=num%}",
                data: {
                    'sts': val,
                },
                success: function(data) {
                    $('#contain').html(data) ;
                },
            });
        });
        $('#app').change(function() {
            const val = $(this).val() ;

            $.ajax({
                url: "{% url 'bpay_a' number=num%}",
                data: {
                    'app': val,
                },
                success: function(data) {
                    $('#contain').html(data) ;
                },
            });
        });
        $('#month').change(function() {
            const val = $(this).val() ;

            $.ajax({
                url: "{% url 'bpay_m' number=num%}",
                data: {
                    'app': val,
                },
                success: function(data) {
                    $('#contain').html(data) ;
                },
            });
        });
    </script>



</body>

</html>